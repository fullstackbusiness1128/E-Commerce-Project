{% extends 'base.html' %}

{% block content %}
<!-- <h1>Check Out Page.</h1>
<h3>Order id: - {{ order_obj.order_id }} </h3>
<h3>Cart total: - {{ order_obj.cart.total }} </h3>
<h3>Shipping Cost: - {{ order_obj.shipping_cost }} </h3>
<h3>Order total: - {{ order_obj.total }} </h3>

----------------------------------------------- -->

<div class="container">
    <h2 class="my-5 h2 text-center">Checkout form</h2>
    <div class="row">
        <div class="col-md-8 mb-4">
            <div class="card">
                <form method="POST" class="card-body">
                    {% csrf_token %}

                    <h3>Shipping address</h3>

                    <div>

                        <div class="md-form mb-5">
                            <input type="text" placeholder="1234 Main St" id="shipping_address" name="shipping_address"
                                class="form-control">
                            <label for="shipping_address" class="active"></label>
                        </div>

                        <div class="md-form mb-5">
                            <input type="text" placeholder="Apartment or suite" id="shipping_address2"
                                name="shipping_address2" class="form-control">
                            <label for="shipping_address2" class="active"></label>
                        </div>

                        <div class="row">
                            <div class="col-lg-4 col-md-12 mb-4">
                                <label for="country">Country</label>
                                <select name="shipping_country" class="custom-select d-block w-100"
                                    id="id_shipping_country"
                                    onchange="var e=document.getElementById('flag_' + this.id); if (e) e.src = '/static/flags/{code}.gif'.replace('{code}', this.value.toLowerCase() || '__').replace('{code_upper}', this.value.toUpperCase() || '__');">
                                    <option value="" selected="">(select country)</option>

                                </select><img class="country-select-flag" id="flag_id_shipping_country"
                                    style="margin: 6px 4px 0" src="/static/flags/__.gif">
                                <div class="invalid-feedback">
                                    Please select a valid country.
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 mb-4">
                                <label for="shipping_zip" class="active">Zip</label>
                                <input type="text" placeholder="Zip code" id="shipping_zip" name="shipping_zip"
                                    class="form-control">
                                <div class="invalid-feedback">
                                    Zip code required.
                                </div>
                            </div>
                        </div>

                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" name="same_billing_address"
                                id="same_billing_address">
                            <label class="custom-control-label" for="same_billing_address">Billing address is the
                                same as my shipping address</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" name="set_default_shipping"
                                id="set_default_shipping">
                            <label class="custom-control-label" for="set_default_shipping">Save as default shipping
                                address</label>
                        </div>

                    </div>



                    <hr>

                    <h3>Billing address</h3>

                    <div class="hideable_billing_form">
                        <div class="md-form mb-5">
                            <input type="text" placeholder="1234 Main St" id="billing_address" name="billing_address"
                                class="form-control">
                            <label for="billing_address" class="active"></label>
                        </div>

                        <div class="md-form mb-5">
                            <input type="text" placeholder="Apartment or suite" id="billing_address2"
                                name="billing_address2" class="form-control">
                            <label for="billing_address2" class="active"></label>
                        </div>

                        <div class="row">
                            <div class="col-lg-4 col-md-12 mb-4">
                                <label for="country">Country</label>
                                <select name="billing_country" class="custom-select d-block w-100"
                                    id="id_billing_country"
                                    onchange="var e=document.getElementById('flag_' + this.id); if (e) e.src = '/static/flags/{code}.gif'.replace('{code}', this.value.toLowerCase() || '__').replace('{code_upper}', this.value.toUpperCase() || '__');">
                                    <option value="" selected="">(select country)</option>


                                </select><img class="country-select-flag" id="flag_id_billing_country"
                                    style="margin: 6px 4px 0" src="/static/flags/__.gif">
                                <div class="invalid-feedback">
                                    Please select a valid country.
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-6 mb-4">
                                <label for="billing_zip" class="active">Zip</label>
                                <input type="text" placeholder="Zip code" id="billing_zip" name="billing_zip"
                                    class="form-control">
                                <div class="invalid-feedback">
                                    Zip code required.
                                </div>
                            </div>

                        </div>

                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" name="set_default_billing"
                                id="set_default_billing">
                            <label class="custom-control-label" for="set_default_billing">Save as default billing
                                address</label>
                        </div>

                    </div>


                    <hr>

                    <h3>Payment option</h3>

                    <div class="d-block my-3">

                        <div class="custom-control custom-radio">
                            <input id="Stripe" name="payment_option" value="S" type="radio" class="custom-control-input"
                                required="">
                            <label class="custom-control-label" for="Stripe">Stripe</label>
                        </div>

                        <div class="custom-control custom-radio">
                            <input id="PayPal" name="payment_option" value="P" type="radio" class="custom-control-input"
                                required="">
                            <label class="custom-control-label" for="PayPal">PayPal</label>
                        </div>

                    </div>

                    <hr class="mb-4">
                    <button class="btn btn-primary btn-lg btn-block waves-effect waves-light" type="submit">Continue
                        to checkout</button>

                </form>

            </div>

        </div>
        <!-- 2nd Section Completed over here. -->
        <div class="col-md-4 mb-4">
            <div class="col-md-12 mb-4">
                <h4 class="d-flex justify-content-between align-items-center mb-3">
                    <span class="text-muted">Your cart</span>
                    <span class="badge badge-secondary badge-pill"> {{ request.session.cart_items_count }} </span>
                </h4>
                <ul class="list-group mb-3">
                    {% for product in cart_obj.products.all %}
                    <li class="list-group-item d-flex justify-content-between">
                        <div>
                            <h6 class="my-0 mr-1">{{ product.title }}</h6>
                            <small class="text-muted">{{ product.category }}</small>
                        </div>
                        <span class="text-muted"> ₹{{ product.price }}</span>
                    </li>
                    {% endfor %}


                </ul>


                <div class="row">
                    <div class="col-md-12">
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Cart Total</span>
                            <span> ₹{{ cart_obj.total }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Shipping Cost</span>
                            <span> ₹{{ order_obj.shipping_cost }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <strong>Total (IND)</strong>
                            <strong> ₹{{ order_obj.total }}</strong>
                        </li>
                    </div>
                </div>


            </div>

        </div>

    </div>
</div>

{% endblock %}